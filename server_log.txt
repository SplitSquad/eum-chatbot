2025-04-24 13:48:10.647 | INFO     | app.config.app_config:get_env_var:65 - 환경변수 LIGHTWEIGHT_LLM_PROVIDER=groq 로드 완료
2025-04-24 13:48:10.647 | INFO     | app.config.app_config:get_env_var:65 - 환경변수 HIGH_PERFORMANCE_LLM_PROVIDER=groq 로드 완료
2025-04-24 13:48:10.647 | INFO     | app.config.app_config:get_env_var:65 - 환경변수 LIGHTWEIGHT_OLLAMA_URL=http://localhost:11434 로드 완료
2025-04-24 13:48:10.647 | INFO     | app.config.app_config:get_env_var:65 - 환경변수 LIGHTWEIGHT_OLLAMA_MODEL=gemma3:4b 로드 완료
2025-04-24 13:48:10.647 | INFO     | app.config.app_config:get_env_var:65 - 환경변수 LIGHTWEIGHT_OLLAMA_TIMEOUT=20 로드 완료
2025-04-24 13:48:10.647 | INFO     | app.config.app_config:get_env_var:65 - 환경변수 HIGH_PERFORMANCE_OLLAMA_URL=http://localhost:11434 로드 완료
2025-04-24 13:48:10.647 | INFO     | app.config.app_config:get_env_var:65 - 환경변수 HIGH_PERFORMANCE_OLLAMA_MODEL=gemma3:4b 로드 완료
2025-04-24 13:48:10.647 | INFO     | app.config.app_config:get_env_var:65 - 환경변수 HIGH_PERFORMANCE_OLLAMA_TIMEOUT=60 로드 완료
2025-04-24 13:48:10.647 | INFO     | app.config.app_config:get_env_var:65 - 환경변수 LIGHTWEIGHT_OPENAI_API_KEY= 로드 완료
2025-04-24 13:48:10.647 | INFO     | app.config.app_config:get_env_var:65 - 환경변수 LIGHTWEIGHT_OPENAI_MODEL=gpt-3.5-turbo 로드 완료
2025-04-24 13:48:10.647 | INFO     | app.config.app_config:get_env_var:65 - 환경변수 LIGHTWEIGHT_OPENAI_TIMEOUT=30 로드 완료
2025-04-24 13:48:10.647 | INFO     | app.config.app_config:get_env_var:65 - 환경변수 HIGH_PERFORMANCE_OPENAI_API_KEY= 로드 완료
2025-04-24 13:48:10.647 | INFO     | app.config.app_config:get_env_var:65 - 환경변수 HIGH_PERFORMANCE_OPENAI_MODEL=gpt-4 로드 완료
2025-04-24 13:48:10.647 | INFO     | app.config.app_config:get_env_var:65 - 환경변수 HIGH_PERFORMANCE_OPENAI_TIMEOUT=60 로드 완료
2025-04-24 13:48:10.647 | INFO     | app.config.app_config:get_env_var:65 - 환경변수 GROQ_API_KEY=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 로드 완료
2025-04-24 13:48:10.647 | INFO     | app.config.app_config:get_env_var:65 - 환경변수 GROQ_LIGHTWEIGHT_MODEL=llama-3.1-8b-instant 로드 완료
2025-04-24 13:48:10.647 | INFO     | app.config.app_config:get_env_var:65 - 환경변수 GROQ_HIGHPERFORMANCE_MODEL=llama-3.3-70b-versatile 로드 완료
2025-04-24 13:48:12.783 | INFO     | app.core.llm_client:__init__:31 - [GroqClient] 경량 모델 초기화 완료: MODEL=llama-3.1-8b-instant, TIMEOUT=30초
2025-04-24 13:48:12.784 | INFO     | app.services.agentic.agentic_classifier:__init__:155 - [에이전틱 분류] 경량 모델 사용: llama-3.1-8b-instant
2025-04-24 13:48:12.784 | INFO     | app.core.llm_client:__init__:35 - [GroqClient] 고성능 모델 초기화 완료: MODEL=llama-3.3-70b-versatile, TIMEOUT=60초
2025-04-24 13:48:12.784 | INFO     | app.services.agentic.agentic_calendar:__init__:35 - [일정 관리] 에이전트 초기화
2025-04-24 13:48:12.784 | INFO     | app.services.agentic.agentic_response_generator:__init__:15 - [에이전틱 응답] 고성능 모델 사용: llama-3.3-70b-versatile
2025-04-24 13:48:12.784 | INFO     | app.core.llm_client:__init__:31 - [GroqClient] 경량 모델 초기화 완료: MODEL=llama-3.1-8b-instant, TIMEOUT=30초
2025-04-24 13:48:12.784 | INFO     | app.services.common.postprocessor:__init__:22 - [Postprocess] Using lightweight model: llama-3.1-8b-instant
2025-04-24 13:48:12.784 | INFO     | app.services.agentic.agentic:__init__:16 - [에이전트] 초기화 완료
[32m2025-04-24 13:48:12.802[0m | [1mINFO    [0m | [36mapp.main[0m:[36m<module>[0m:[36m10[0m - [1mApplication starting up...[0m
[32m2025-04-24 13:48:12.804[0m | [1mINFO    [0m | [36mapp.main[0m:[36mstartup_event[0m:[36m33[0m - [1m[WORKFLOW] Server started successfully[0m
[32m2025-04-24 13:53:54.065[0m | [1mINFO    [0m | [36mapp.core.llm_client[0m:[36m__init__[0m:[36m31[0m - [1m[GroqClient] 경량 모델 초기화 완료: MODEL=llama-3.1-8b-instant, TIMEOUT=30초[0m
[32m2025-04-24 13:53:54.066[0m | [1mINFO    [0m | [36mapp.services.chatbot.chatbot_classifier[0m:[36m__init__[0m:[36m28[0m - [1m[분류] Groq 경량 모델 사용: llama-3.1-8b-instant[0m
[32m2025-04-24 13:53:54.067[0m | [1mINFO    [0m | [36mlogging[0m:[36mcallHandlers[0m:[36m1762[0m - [1mLoad pretrained SentenceTransformer: sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2[0m
/Users/songkyubeen/eum-chatbot-env/lib/python3.12/site-packages/huggingface_hub/file_download.py:896: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.
  warnings.warn(
/Users/songkyubeen/eum-chatbot-env/lib/python3.12/site-packages/huggingface_hub/file_download.py:896: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.
  warnings.warn(
[32m2025-04-24 13:53:58.433[0m | [1mINFO    [0m | [36mlogging[0m:[36mcallHandlers[0m:[36m1762[0m - [1mUse pytorch device_name: mps[0m
[32m2025-04-24 13:53:58.718[0m | [1mINFO    [0m | [36mapp.services.common.rag_service[0m:[36m__init__[0m:[36m15[0m - [1m[RAG] 임베딩 모델 사용: sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2[0m
[32m2025-04-24 13:53:58.739[0m | [1mINFO    [0m | [36mlogging[0m:[36mcallHandlers[0m:[36m1762[0m - [1mAnonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.[0m
[32m2025-04-24 13:53:59.172[0m | [1mINFO    [0m | [36mapp.services.common.rag_service[0m:[36m__init__[0m:[36m36[0m - [1m[RAG] visa_law 도메인 초기화 완료: data/vectorstore1[0m
[32m2025-04-24 13:53:59.173[0m | [1mINFO    [0m | [36mlogging[0m:[36mcallHandlers[0m:[36m1762[0m - [1mAnonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.[0m
[32m2025-04-24 13:53:59.177[0m | [1mINFO    [0m | [36mapp.services.common.rag_service[0m:[36m__init__[0m:[36m36[0m - [1m[RAG] social_security 도메인 초기화 완료: data/vectorstore2[0m
[32m2025-04-24 13:53:59.179[0m | [1mINFO    [0m | [36mlogging[0m:[36mcallHandlers[0m:[36m1762[0m - [1mAnonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.[0m
[32m2025-04-24 13:53:59.181[0m | [1mINFO    [0m | [36mapp.services.common.rag_service[0m:[36m__init__[0m:[36m36[0m - [1m[RAG] tax_finance 도메인 초기화 완료: data/vectorstore3[0m
[32m2025-04-24 13:53:59.183[0m | [1mINFO    [0m | [36mlogging[0m:[36mcallHandlers[0m:[36m1762[0m - [1mAnonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.[0m
[32m2025-04-24 13:53:59.185[0m | [1mINFO    [0m | [36mapp.services.common.rag_service[0m:[36m__init__[0m:[36m36[0m - [1m[RAG] medical_health 도메인 초기화 완료: data/vectorstore4[0m
[32m2025-04-24 13:53:59.187[0m | [1mINFO    [0m | [36mlogging[0m:[36mcallHandlers[0m:[36m1762[0m - [1mAnonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.[0m
[32m2025-04-24 13:53:59.189[0m | [1mINFO    [0m | [36mapp.services.common.rag_service[0m:[36m__init__[0m:[36m36[0m - [1m[RAG] employment 도메인 초기화 완료: data/vectorstore5[0m
[32m2025-04-24 13:53:59.191[0m | [1mINFO    [0m | [36mlogging[0m:[36mcallHandlers[0m:[36m1762[0m - [1mAnonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.[0m
[32m2025-04-24 13:53:59.194[0m | [31m[1mERROR   [0m | [36mapp.services.common.rag_service[0m:[36m__init__[0m:[36m38[0m - [31m[1m[RAG] daily_life 도메인 초기화 중 오류 발생: no such column: collections.topic[0m
[32m2025-04-24 13:53:59.194[0m | [1mINFO    [0m | [36mapp.core.llm_client[0m:[36m__init__[0m:[36m35[0m - [1m[GroqClient] 고성능 모델 초기화 완료: MODEL=llama-3.3-70b-versatile, TIMEOUT=60초[0m
[32m2025-04-24 13:53:59.194[0m | [1mINFO    [0m | [36mapp.services.chatbot.chatbot_response_generator[0m:[36m__init__[0m:[36m16[0m - [1m[응답 생성기] Groq 고성능 모델 사용: llama-3.3-70b-versatile, 타임아웃: 60초[0m
[32m2025-04-24 13:53:59.194[0m | [1mINFO    [0m | [36mapp.services.chatbot.chatbot_response_generator[0m:[36m__init__[0m:[36m18[0m - [1m[응답 생성기] 디바이스: cpu[0m
[32m2025-04-24 13:53:59.194[0m | [1mINFO    [0m | [36mapp.core.llm_client[0m:[36m__init__[0m:[36m31[0m - [1m[GroqClient] 경량 모델 초기화 완료: MODEL=llama-3.1-8b-instant, TIMEOUT=30초[0m
[32m2025-04-24 13:53:59.194[0m | [1mINFO    [0m | [36mapp.services.common.postprocessor[0m:[36m__init__[0m:[36m22[0m - [1m[Postprocess] Using lightweight model: llama-3.1-8b-instant[0m
[32m2025-04-24 13:53:59.194[0m | [1mINFO    [0m | [36mapp.services.chatbot.chatbot[0m:[36m__init__[0m:[36m15[0m - [1m[챗봇] 초기화 완료[0m
[32m2025-04-24 13:53:59.194[0m | [1mINFO    [0m | [36mapp.services.chatbot.chatbot[0m:[36mget_response[0m:[36m20[0m - [1m[WORKFLOW] ====== Starting chatbot workflow for user user_id ======[0m
[32m2025-04-24 13:53:59.194[0m | [1mINFO    [0m | [36mapp.services.chatbot.chatbot[0m:[36mget_response[0m:[36m21[0m - [1m[WORKFLOW] Original query: Quiero estudiar en el extranjero en Corea. Por favor, dígame qué calificaciones y titulaciones necesito.[0m
[32m2025-04-24 13:53:59.194[0m | [1mINFO    [0m | [36mapp.services.chatbot.chatbot_classifier[0m:[36mclassify[0m:[36m41[0m - [1m[분류] 질의 분류 시작: Quiero estudiar en el extranjero en Corea. Por favor, dígame qué calificaciones y titulaciones necesito.[0m
[32m2025-04-24 13:53:59.685[0m | [1mINFO    [0m | [36mlogging[0m:[36mcallHandlers[0m:[36m1762[0m - [1mHTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"[0m
[32m2025-04-24 13:53:59.689[0m | [1mINFO    [0m | [36mapp.core.llm_client[0m:[36mgenerate[0m:[36m85[0m - [1m[Groq 경량] API 요청 시간: 0.49초[0m
[32m2025-04-24 13:53:59.689[0m | [1mINFO    [0m | [36mapp.core.llm_client[0m:[36mgenerate[0m:[36m91[0m - [1m[Groq 경량] 전체 생성 시간: 0.49초[0m
[32m2025-04-24 13:53:59.690[0m | [1mINFO    [0m | [36mapp.services.chatbot.chatbot_classifier[0m:[36mclassify[0m:[36m45[0m - [1m[분류] 질의 유형: reasoning[0m
[32m2025-04-24 13:54:00.205[0m | [1mINFO    [0m | [36mlogging[0m:[36mcallHandlers[0m:[36m1762[0m - [1mHTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"[0m
[32m2025-04-24 13:54:00.208[0m | [1mINFO    [0m | [36mapp.core.llm_client[0m:[36mgenerate[0m:[36m85[0m - [1m[Groq 경량] API 요청 시간: 0.51초[0m
[32m2025-04-24 13:54:00.208[0m | [1mINFO    [0m | [36mapp.core.llm_client[0m:[36mgenerate[0m:[36m91[0m - [1m[Groq 경량] 전체 생성 시간: 0.52초[0m
[32m2025-04-24 13:54:00.209[0m | [1mINFO    [0m | [36mapp.services.chatbot.chatbot_classifier[0m:[36mclassify[0m:[36m49[0m - [1m[분류] RAG 유형: daily_life[0m
[32m2025-04-24 13:54:00.209[0m | [1mINFO    [0m | [36mapp.services.chatbot.chatbot[0m:[36mget_response[0m:[36m25[0m - [1m[챗봇] 분류 완료 - 질의 유형: reasoning, RAG 유형: daily_life[0m
[32m2025-04-24 13:54:00.209[0m | [1mINFO    [0m | [36mapp.services.chatbot.chatbot[0m:[36mget_response[0m:[36m26[0m - [1m[WORKFLOW] Query classified as reasoning, RAG type: daily_life[0m
[32m2025-04-24 13:54:00.210[0m | [1mINFO    [0m | [36mapp.services.chatbot.chatbot[0m:[36mget_response[0m:[36m29[0m - [1m[WORKFLOW] Step 1: Preprocessing (language detection and translation)[0m
[32m2025-04-24 13:54:00.210[0m | [1mINFO    [0m | [36mapp.services.common.preprocessor[0m:[36mtranslate_query[0m:[36m41[0m - [1m[PREPROCESS] Original query: Quiero estudiar en el extranjero en Corea. Por favor, dígame qué calificaciones y titulaciones necesito.[0m
[32m2025-04-24 13:54:00.210[0m | [1mINFO    [0m | [36mapp.core.llm_client[0m:[36m__init__[0m:[36m31[0m - [1m[GroqClient] 경량 모델 초기화 완료: MODEL=llama-3.1-8b-instant, TIMEOUT=30초[0m
[32m2025-04-24 13:54:00.210[0m | [1mINFO    [0m | [36mapp.services.common.preprocessor[0m:[36mtranslate_query[0m:[36m47[0m - [1m[Preprocess] Client initialization time: 0.00 seconds[0m
[32m2025-04-24 13:54:00.210[0m | [1mINFO    [0m | [36mapp.services.common.preprocessor[0m:[36mtranslate_query[0m:[36m48[0m - [1m[Preprocess] Model used: llama-3.1-8b-instant[0m
[32m2025-04-24 13:54:00.426[0m | [1mINFO    [0m | [36mlogging[0m:[36mcallHandlers[0m:[36m1762[0m - [1mHTTP Request: GET https://api.groq.com/openai/v1/models "HTTP/1.1 200 OK"[0m
[32m2025-04-24 13:54:00.432[0m | [1mINFO    [0m | [36mapp.core.llm_client[0m:[36mcheck_connection[0m:[36m52[0m - [1m[Groq 경량] 연결 확인 시간: 0.22초[0m
[32m2025-04-24 13:54:00.433[0m | [1mINFO    [0m | [36mapp.services.common.preprocessor[0m:[36mtranslate_query[0m:[36m55[0m - [1m[Preprocess] Server connection check time: 0.22 seconds[0m
[32m2025-04-24 13:54:01.069[0m | [1mINFO    [0m | [36mlogging[0m:[36mcallHandlers[0m:[36m1762[0m - [1mHTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"[0m
[32m2025-04-24 13:54:01.071[0m | [1mINFO    [0m | [36mapp.core.llm_client[0m:[36mgenerate[0m:[36m85[0m - [1m[Groq 경량] API 요청 시간: 0.63초[0m
[32m2025-04-24 13:54:01.071[0m | [1mINFO    [0m | [36mapp.core.llm_client[0m:[36mgenerate[0m:[36m91[0m - [1m[Groq 경량] 전체 생성 시간: 0.64초[0m
[32m2025-04-24 13:54:01.072[0m | [1mINFO    [0m | [36mapp.services.common.preprocessor[0m:[36mtranslate_query[0m:[36m63[0m - [1m[Preprocess] LLM generation time: 0.64 seconds[0m
[32m2025-04-24 13:54:01.072[0m | [31m[1mERROR   [0m | [36mapp.services.common.preprocessor[0m:[36mtranslate_query[0m:[36m86[0m - [31m[1m[Preprocess] Failed to parse translation response JSON: Expecting value: line 1 column 1 (char 0)[0m
[32m2025-04-24 13:54:01.073[0m | [31m[1mERROR   [0m | [36mapp.services.common.preprocessor[0m:[36mtranslate_query[0m:[36m87[0m - [31m[1m[Preprocess] Original response: The language of the query is Spanish.

Translated query in English:
"I want to study abroad in Korea. Please tell me what grades and qualifications I need."

Here is the JSON response in English:

```json
{
  "translated_query": "I want to study abroad in Korea. Please tell me what grades and qualifications I need.",
  "lang_code": "en"
}
```[0m
[32m2025-04-24 13:54:01.073[0m | [31m[1mERROR   [0m | [36mapp.services.chatbot.chatbot[0m:[36mget_response[0m:[36m65[0m - [31m[1m응답 생성 중 오류 발생: Translation response parsing error: Expecting value: line 1 column 1 (char 0)
Original response: The language of the query is Spanish.

Translated query in English:
"I want to study abroad in Korea. Please tell me what grades and qualifications I need."

Here is the JSON response in English:

```json
{
  "translated_query": "I want to study abroad in Korea. Please tell me what grades and qualifications I need.",
  "lang_code": "en"
}
```[0m
[32m2025-04-24 13:54:01.073[0m | [31m[1mERROR   [0m | [36mapp.services.chatbot.chatbot[0m:[36mget_response[0m:[36m66[0m - [31m[1m[WORKFLOW] ====== Error in chatbot workflow: Translation response parsing error: Expecting value: line 1 column 1 (char 0)
Original response: The language of the query is Spanish.

Translated query in English:
"I want to study abroad in Korea. Please tell me what grades and qualifications I need."

Here is the JSON response in English:

```json
{
  "translated_query": "I want to study abroad in Korea. Please tell me what grades and qualifications I need.",
  "lang_code": "en"
}
``` ======[0m
Loaded settings from .env: LIGHTWEIGHT_LLM_PROVIDER=LLMProvider.GROQ
INFO:     127.0.0.1:53378 - "POST /api/v1/chatbot HTTP/1.1" 200 OK
[32m2025-04-24 14:00:09.155[0m | [1mINFO    [0m | [36mapp.main[0m:[36mshutdown_event[0m:[36m37[0m - [1m[WORKFLOW] Server shutting down[0m
