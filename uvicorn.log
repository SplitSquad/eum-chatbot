INFO:     Will watch for changes in these directories: ['/Users/songkyubeen/Desktop/FinalProject/eum-chatbot']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [51541] using WatchFiles
INFO:     Started server process [51548]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
2025-04-17 10:05:59.556 | INFO     | app.core.preprocess:translate_query:43 - [Preprocess] 클라이언트 초기화 시간: 0.00초
2025-04-17 10:05:59.664 | INFO     | app.core.llm_client:check_connection:46 - [Ollama 경량] 연결 확인 시간: 0.11초
2025-04-17 10:05:59.665 | INFO     | app.core.preprocess:translate_query:50 - [Preprocess] 서버 연결 확인 시간: 0.11초
2025-04-17 10:05:59.688 | INFO     | app.core.llm_client:generate:70 - [Ollama 경량] API 요청 시간: 0.01초
2025-04-17 10:05:59.689 | ERROR    | app.core.llm_client:generate:91 - [Ollama 경량] 예상치 못한 오류: Client error '404 Not Found' for url 'http://localhost:11434/api/generate'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404 (소요 시간: 0.02초)
2025-04-17 10:05:59.689 | ERROR    | app.core.preprocess:translate_query:82 - [Preprocess] 번역 처리 중 오류 발생: Ollama 처리 중 오류 발생: Client error '404 Not Found' for url 'http://localhost:11434/api/generate'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404 (소요 시간: 0.13초)
INFO:     127.0.0.1:63912 - "POST /chatbot HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/songkyubeen/Desktop/FinalProject/eum-chatbot/app/core/llm_client.py", line 72, in generate
    response.raise_for_status()
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '404 Not Found' for url 'http://localhost:11434/api/generate'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/songkyubeen/Desktop/FinalProject/eum-chatbot/app/core/preprocess.py", line 54, in translate_query
    result = await llm_client.generate(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/songkyubeen/Desktop/FinalProject/eum-chatbot/app/core/llm_client.py", line 92, in generate
    raise ValueError(f"Ollama 처리 중 오류 발생: {str(e)}")
ValueError: Ollama 처리 중 오류 발생: Client error '404 Not Found' for url 'http://localhost:11434/api/generate'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/songkyubeen/Desktop/FinalProject/eum-chatbot/app/api/v1/chatbot.py", line 17, in chatbot_handler
    translated = await translate_query(payload.query)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/songkyubeen/Desktop/FinalProject/eum-chatbot/app/core/preprocess.py", line 83, in translate_query
    raise ValueError(f"번역 처리 중 오류 발생: {str(e)}")
ValueError: 번역 처리 중 오류 발생: Ollama 처리 중 오류 발생: Client error '404 Not Found' for url 'http://localhost:11434/api/generate'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [51548]
INFO:     Stopping reloader process [51541]
